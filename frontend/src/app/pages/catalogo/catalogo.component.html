<body>
    <nav>
        <h1>{{'Digital Library - ' + userType}}</h1>
        <ul class="nav-links">
            <li><a [routerLink]="['/catalogo']" routerLinkActive="active-link">Catalogo</a></li>
            @if (userType === 'Administrador') {
            <li><a [routerLink]="['/usuario']" routerLinkActive="active-link">Usuarios</a></li>
            }
        </ul>

        <a [routerLink]="['']" (click)="logOut()">Cerrar sesion</a>
    </nav>
    <div class="search-container">
        <select id="search-type" [(ngModel)]="selectedOption">
            <option value="libro">Libro</option>
            <option value="autor">Autor</option>
        </select>
        <input type="text" id="search-bar" placeholder="Buscar...">
        <button class="btn search-btn" (click)="search()">Buscar</button>

        @if (userType === 'Administrador') {

        @if (selectedOption==='libro') {
        <button class="btn add-book-btn" (click)="showBookForm=true">Agregar Libro</button>
        }@else {
        <button class="btn add-author-btn" (click)="showAuthorForm=true">Agregar Autor</button>
        }
        }
    </div>

    @if (selectedOption==='libro') {
    <div class="card-container">
        @for (item of books; track item.ISBN; let i=$index) {
        <div class="card">
            <img src="cien.jpeg" alt="Libro">
            <div class="card-content">
                <p><strong>ISBN:</strong> {{item.ISBN}}</p>
                <p><strong>Título:</strong> {{item.title}}</p>
                <p><strong>Editorial:</strong> {{item.editorial}}</p>
                <p><strong>Género:</strong> {{item.genre}}</p>
                <p><strong>Año:</strong> {{item.year}}</p>
                <p><strong>Autor:</strong> {{item.Author.fullName}}</p>
                @if (userType === 'Administrador') {
                <button class="edit-btn" (click)="showBookForm=true">Editar</button>
                }
            </div>
        </div>
        }
    </div>
    }
    @if (showBookForm) {
    <div class="overlay" id="overlay">
        <div class="form-container">
            <h2>Agregar Libro</h2>
            <form>
                <label for="isbn">ISBN:</label>
                <input type="text" id="isbn" placeholder="Ingrese ISBN">

                <label for="titulo">Título:</label>
                <input type="text" id="titulo" placeholder="Ingrese título">

                <label for="editorial">Editorial:</label>
                <input type="text" id="editorial" placeholder="Ingrese editorial">

                <label for="genero">Género:</label>
                <input type="text" id="genero" placeholder="Ingrese género">

                <label for="anio">Año:</label>
                <input type="number" id="anio" placeholder="Ingrese año">

                <label for="autor">Autor:</label>
                <input type="text" id="autor" placeholder="Ingrese autor">

                <button type="submit" class="submit-btn">Guardar</button>
                <button type="button" class="close-btn" (click)="showBookForm=false">Cancelar</button>
            </form>
        </div>
    </div>
    }

    @if (showAuthorForm) {
    <div class="overlay" id="overlay">
        <div class="form-container">
            <h2>Agregar Autor</h2>
            <form>
                <label for="cedula">Cédula:</label>
                <input type="text" id="cedula" placeholder="Ingrese cédula">

                <label for="nombre">Nombre Completo:</label>
                <input type="text" id="nombre" placeholder="Ingrese nombre completo">

                <label for="nacionalidad">Nacionalidad:</label>
                <input type="text" id="nacionalidad" placeholder="Ingrese nacionalidad">

                <button type="submit" class="submit-btn">Guardar</button>
                <button type="button" class="close-btn" (click)="showAuthorForm=false">Cancelar</button>
            </form>
        </div>
    </div>
    }

    @if (selectedOption==='autor') {
    <div class="card-container">
        @for (item of authors; track item.id; let i=$index) {
        <div class="card">
            <img src="gabrielg.jpg" alt="Autor">
            <div class="card-content">
                <p><strong>Cédula: </strong>{{item.cedula}}</p>
                <p><strong>Nombre: </strong>{{item.fullName}} </p>
                <p><strong>Nacionalidad: </strong> {{item.nationality}}</p>
                @if (userType === 'Administrador') {
                <button class="edit-btn" (click)="showAuthorForm=true">Editar</button>
                }
            </div>
        </div>
        }
    </div>
    }

</body>